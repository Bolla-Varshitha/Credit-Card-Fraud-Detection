<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Card Fraud Detection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .fraud-alert { background-color: #f8d7da; border-color: #f5c6cb; }
        .suspicious-alert { background-color: #fff3cd; border-color: #ffeaa7; }
        .safe-alert { background-color: #d1edff; border-color: #b3d9ff; }
        .dashboard-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .metric-card { transition: transform 0.2s; }
        .metric-card:hover { transform: translateY(-5px); }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark dashboard-header">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-shield-alt"></i> Fraud Detection System
            </a>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Metrics Overview -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card metric-card text-white bg-primary">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4>98.01%</h4>
                                <p>AUC Score</p>
                            </div>
                            <i class="fas fa-chart-line fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card metric-card text-white bg-success">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4>96.37%</h4>
                                <p>Accuracy</p>
                            </div>
                            <i class="fas fa-check-circle fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card metric-card text-white bg-warning">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4>89.80%</h4>
                                <p>Recall</p>
                            </div>
                            <i class="fas fa-eye fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card metric-card text-white bg-info">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h4>3 Models</h4>
                                <p>Trained</p>
                            </div>
                            <i class="fas fa-brain fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Tabs -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="single-tab" data-bs-toggle="tab" data-bs-target="#single" type="button" role="tab">
                    <i class="fas fa-credit-card"></i> Single Transaction
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="batch-tab" data-bs-toggle="tab" data-bs-target="#batch" type="button" role="tab">
                    <i class="fas fa-file-csv"></i> Batch Processing
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="performance-tab" data-bs-toggle="tab" data-bs-target="#performance" type="button" role="tab">
                    <i class="fas fa-chart-bar"></i> Performance
                </button>
            </li>
        </ul>

        <div class="tab-content mt-3" id="myTabContent">
            <!-- Single Transaction Tab -->
            <div class="tab-pane fade show active" id="single" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5><i class="fas fa-edit"></i> Transaction Details</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Transaction Amount ($)</label>
                                    <input type="number" class="form-control" id="amount" value="100" min="0" step="0.01">
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label">V1</label>
                                        <input type="number" class="form-control" id="v1" value="0" step="0.1">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">V2</label>
                                        <input type="number" class="form-control" id="v2" value="0" step="0.1">
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-md-6">
                                        <label class="form-label">V3</label>
                                        <input type="number" class="form-control" id="v3" value="0" step="0.1">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">V4</label>
                                        <input type="number" class="form-control" id="v4" value="0" step="0.1">
                                    </div>
                                </div>
                                <button class="btn btn-success mt-3 w-100" onclick="analyzeTransaction()">
                                    <i class="fas fa-search"></i> Analyze Transaction
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5><i class="fas fa-chart-pie"></i> Analysis Results</h5>
                            </div>
                            <div class="card-body" id="results">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle"></i> Enter transaction details and click "Analyze"
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Batch Processing Tab -->
            <div class="tab-pane fade" id="batch" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5><i class="fas fa-upload"></i> Upload CSV File</h5>
                            </div>
                            <div class="card-body">
                                <input type="file" class="form-control" id="csvFile" accept=".csv">
                                <button class="btn btn-success mt-3 w-100" onclick="processBatch()">
                                    <i class="fas fa-cogs"></i> Process Batch
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5><i class="fas fa-table"></i> Batch Results</h5>
                            </div>
                            <div class="card-body">
                                <div id="batchResults">
                                    <p class="text-muted">Upload a CSV file to see results</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Tab -->
            <div class="tab-pane fade" id="performance" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-chart-line"></i> Model Performance</h5>
                    </div>
                    <div class="card-body">
                        <div id="performanceChart">
                            <img src="reports/model_metrics_comparison.png" class="img-fluid" alt="Performance Chart">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function analyzeTransaction() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="alert alert-info">
                    <i class="fas fa-spinner fa-spin"></i> Analyzing transaction...
                </div>
            `;

            // Simulate API call - in real implementation, this would call your R backend
            setTimeout(() => {
                const amount = document.getElementById('amount').value;
                const fraudProbability = Math.random() * 100;
                
                let alertClass, icon, message;
                if (fraudProbability > 70) {
                    alertClass = 'fraud-alert';
                    icon = 'üö®';
                    message = 'CRITICAL RISK: Immediate action required!';
                } else if (fraudProbability > 50) {
                    alertClass = 'suspicious-alert';
                    icon = '‚ö†Ô∏è';
                    message = 'SUSPICIOUS: Additional verification needed';
                } else {
                    alertClass = 'safe-alert';
                    icon = '‚úÖ';
                    message = 'LOW RISK: Transaction appears legitimate';
                }

                resultsDiv.innerHTML = `
                    <div class="alert ${alertClass}">
                        <h4>${icon} Fraud Probability: ${fraudProbability.toFixed(2)}%</h4>
                        <p><strong>Amount:</strong> $${amount}</p>
                        <p><strong>Status:</strong> ${message}</p>
                        <p><strong>Recommendation:</strong> ${getRecommendation(fraudProbability)}</p>
                    </div>
                `;
            }, 1500);
        }

        function getRecommendation(probability) {
            if (probability > 70) return 'BLOCK IMMEDIATELY - Contact fraud department';
            if (probability > 50) return 'Request additional verification from customer';
            if (probability > 30) return 'Process with standard verification';
            return 'Process normally';
        }

        function processBatch() {
            const fileInput = document.getElementById('csvFile');
            const resultsDiv = document.getElementById('batchResults');
            
            if (!fileInput.files[0]) {
                alert('Please select a CSV file');
                return;
            }

            resultsDiv.innerHTML = `
                <div class="alert alert-info">
                    <i class="fas fa-spinner fa-spin"></i> Processing batch file...
                </div>
            `;

            // Simulate processing
            setTimeout(() => {
                resultsDiv.innerHTML = `
                    <div class="alert alert-success">
                        <h5><i class="fas fa-check-circle"></i> Batch Processing Complete</h5>
                        <p><strong>File:</strong> ${fileInput.files[0].name}</p>
                        <p><strong>Transactions processed:</strong> 1,247</p>
                        <p><strong>Fraud alerts:</strong> 23</p>
                        <p><strong>Processing time:</strong> 2.3 seconds</p>
                        <button class="btn btn-primary btn-sm mt-2">
                            <i class="fas fa-download"></i> Download Results
                        </button>
                    </div>
                `;
            }, 2000);
        }
    </script>
</body>
</html>
